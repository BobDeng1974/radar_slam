<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Radar SLAM: CarPoseEstimator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radar SLAM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classCarPoseEstimator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CarPoseEstimator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="CarPoseEstimator_8h_source.html">CarPoseEstimator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac98122d94daec15a02c51be36ae588d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ac98122d94daec15a02c51be36ae588d9">processModel</a> (double speed, double steer_angle, double dt, Eigen::Affine3d &amp;pose, Eigen::Matrix&lt; double, 6, 1 &gt; &amp;vel, double &amp;yaw_unwrpd, bool is_base)</td></tr>
<tr class="separator:ac98122d94daec15a02c51be36ae588d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d969f5d6e6fbd5fabfe2768a959e85d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a9d969f5d6e6fbd5fabfe2768a959e85d">updatePose</a> (const radar_slam::CarData &amp;msg)</td></tr>
<tr class="separator:a9d969f5d6e6fbd5fabfe2768a959e85d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae329e591c83b7d58ebe318017f33b087"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ae329e591c83b7d58ebe318017f33b087">updateMap</a> (const radar_ros_interface::RadarData &amp;msg)</td></tr>
<tr class="separator:ae329e591c83b7d58ebe318017f33b087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38ea434b924eeff6126724da1ab94e72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a38ea434b924eeff6126724da1ab94e72">computeSensorFOV</a> (const Eigen::Affine3d &amp;tf_sensor_to_world, int &amp;start_ind_i, int &amp;end_ind_i, int &amp;start_ind_j, int &amp;end_ind_j)</td></tr>
<tr class="separator:a38ea434b924eeff6126724da1ab94e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66e6b4641b3031dddb5900dcff742f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#af66e6b4641b3031dddb5900dcff742f3">inverseSensorModel</a> (const std::vector&lt; radar_ros_interface::RadarTarget &gt; &amp;targets, const Eigen::Affine3d &amp;tf_sensor_to_world)</td></tr>
<tr class="separator:af66e6b4641b3031dddb5900dcff742f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c08e481bb545a1fe90a724b1b85ed30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a8c08e481bb545a1fe90a724b1b85ed30">grid_ind_to_world_pos</a> (const int &amp;i, const int &amp;j, Eigen::Vector3d &amp;pos)</td></tr>
<tr class="separator:a8c08e481bb545a1fe90a724b1b85ed30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6469faacebc57f95a9c41daa1dec5895"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a6469faacebc57f95a9c41daa1dec5895">world_pos_to_grid_ind</a> (const Eigen::Vector3d &amp;pos, int &amp;i, int &amp;j)</td></tr>
<tr class="separator:a6469faacebc57f95a9c41daa1dec5895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8b873c81afa368cefce521c83431d8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a7d8b873c81afa368cefce521c83431d8">constrainAngle</a> (double x)</td></tr>
<tr class="separator:a7d8b873c81afa368cefce521c83431d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb270d0d8eecc051bc1ca0e02bde595"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a1fb270d0d8eecc051bc1ca0e02bde595">angleConv</a> (double angle)</td></tr>
<tr class="separator:a1fb270d0d8eecc051bc1ca0e02bde595"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b7344dd7b079631e8ddb92acf13ee3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ab5b7344dd7b079631e8ddb92acf13ee3">angleDiff</a> (double a, double b)</td></tr>
<tr class="separator:ab5b7344dd7b079631e8ddb92acf13ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c6186f087c254f90915be63fac475de"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a9c6186f087c254f90915be63fac475de">unwrap</a> (double previousAngle, double newAngle)</td></tr>
<tr class="separator:a9c6186f087c254f90915be63fac475de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521284a9be9fc0fd6c39e77f6e31dadd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a521284a9be9fc0fd6c39e77f6e31dadd">log_odds_to_prob</a> (double log_odds)</td></tr>
<tr class="separator:a521284a9be9fc0fd6c39e77f6e31dadd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa15aae458a1b1a47ecb72527cf91f53e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#aa15aae458a1b1a47ecb72527cf91f53e">log_odds_to_map_prob</a> (double log_odds)</td></tr>
<tr class="separator:aa15aae458a1b1a47ecb72527cf91f53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f422b5afb364e053a3bc800ed93f2f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a30f422b5afb364e053a3bc800ed93f2f">prob_to_log_odds</a> (double prob)</td></tr>
<tr class="separator:a30f422b5afb364e053a3bc800ed93f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30fc46d81f194ce048858d9dc94b0232"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a30fc46d81f194ce048858d9dc94b0232">map_prob_to_log_odds</a> (int prob)</td></tr>
<tr class="separator:a30fc46d81f194ce048858d9dc94b0232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef5d43a9b40b19a380e288938439df2e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#aef5d43a9b40b19a380e288938439df2e">normal_dist</a> (double mu, double var, double x)</td></tr>
<tr class="separator:aef5d43a9b40b19a380e288938439df2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fa8588ebd7269f35f63415f84c265e7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a9fa8588ebd7269f35f63415f84c265e7">normal_dist</a> (Eigen::Vector2d mu, Eigen::Matrix2d var, Eigen::Vector2d x)</td></tr>
<tr class="separator:a9fa8588ebd7269f35f63415f84c265e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8505ff4d798050be9388bb0b69029b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a5e8505ff4d798050be9388bb0b69029b">prob_detection</a> (double r_cell, double th_cell, double r_target, double th_target)</td></tr>
<tr class="separator:a5e8505ff4d798050be9388bb0b69029b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d25574ccee5e33e3b7c5fce6839af9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a69d25574ccee5e33e3b7c5fce6839af9">prob_no_detection</a> (double r_cell, double th_cell, double r_target, double th_target)</td></tr>
<tr class="separator:a69d25574ccee5e33e3b7c5fce6839af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1718fa4e7e37b6d2723e6797554c33c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ae1718fa4e7e37b6d2723e6797554c33c">low_var_resamp</a> (std::vector&lt; double &gt; &amp;weights, std::vector&lt; Eigen::Affine3d &gt; &amp;particles)</td></tr>
<tr class="separator:ae1718fa4e7e37b6d2723e6797554c33c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3f386aade8e93fbf119bc0b68c2f0b7d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a3f386aade8e93fbf119bc0b68c2f0b7d">wheelbase</a></td></tr>
<tr class="separator:a3f386aade8e93fbf119bc0b68c2f0b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa89ebfabc0a3cf77c0bd680c2f55f6f8"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#aa89ebfabc0a3cf77c0bd680c2f55f6f8">steering_ratio</a></td></tr>
<tr class="separator:aa89ebfabc0a3cf77c0bd680c2f55f6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f024f3baf29b595eb380eaaab1172e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a6f024f3baf29b595eb380eaaab1172e2">map_grid_size</a></td></tr>
<tr class="separator:a6f024f3baf29b595eb380eaaab1172e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c29a0b73d4d9f30f0554ff496caa8b7"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a9c29a0b73d4d9f30f0554ff496caa8b7">map_grid_res</a></td></tr>
<tr class="separator:a9c29a0b73d4d9f30f0554ff496caa8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22ec4de8912c39dd28479a146f695df1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a22ec4de8912c39dd28479a146f695df1">num_update_cells</a></td></tr>
<tr class="separator:a22ec4de8912c39dd28479a146f695df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac563904aa1f14b97fc6308cbe2e01548"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ac563904aa1f14b97fc6308cbe2e01548">sigma_speed</a></td></tr>
<tr class="separator:ac563904aa1f14b97fc6308cbe2e01548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c083f215cc0d3061b8875b29c6409fa"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a6c083f215cc0d3061b8875b29c6409fa">sigma_steer_angle</a></td></tr>
<tr class="separator:a6c083f215cc0d3061b8875b29c6409fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d750d480867dab1573416f5787e46e4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a9d750d480867dab1573416f5787e46e4">rel_speed_thresh</a></td></tr>
<tr class="separator:a9d750d480867dab1573416f5787e46e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea21826227bc01abd2d909e6d1042c48"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#aea21826227bc01abd2d909e6d1042c48">sigma_r</a></td></tr>
<tr class="separator:aea21826227bc01abd2d909e6d1042c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1601ef1ed426682d396b6e4ca83d7c13"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a1601ef1ed426682d396b6e4ca83d7c13">sigma_th</a></td></tr>
<tr class="separator:a1601ef1ed426682d396b6e4ca83d7c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f15fec1dadf3c0b04a031b4f3246ff"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ae6f15fec1dadf3c0b04a031b4f3246ff">sigma_no_r</a></td></tr>
<tr class="separator:ae6f15fec1dadf3c0b04a031b4f3246ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d08b65d718de338ceb592522c80caf1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a8d08b65d718de338ceb592522c80caf1">sigma_no_th</a></td></tr>
<tr class="separator:a8d08b65d718de338ceb592522c80caf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eb1f7cdc300514be1c455741acca598"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a0eb1f7cdc300514be1c455741acca598">max_r</a></td></tr>
<tr class="separator:a0eb1f7cdc300514be1c455741acca598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a2929e557a6c833c9b7aba180eba83a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a5a2929e557a6c833c9b7aba180eba83a">max_th</a></td></tr>
<tr class="separator:a5a2929e557a6c833c9b7aba180eba83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c6a62fa603a358e9ce7ec7213fe4aa"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a25c6a62fa603a358e9ce7ec7213fe4aa">min_snr</a></td></tr>
<tr class="separator:a25c6a62fa603a358e9ce7ec7213fe4aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a303f33af92ee99db2f8b6174b89cae74"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a303f33af92ee99db2f8b6174b89cae74">prob_fa</a></td></tr>
<tr class="separator:a303f33af92ee99db2f8b6174b89cae74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0822d1b8de6ff15e0dda638e1e0f5ff1"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a0822d1b8de6ff15e0dda638e1e0f5ff1">sigma_px_init</a></td></tr>
<tr class="separator:a0822d1b8de6ff15e0dda638e1e0f5ff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f8262481efe7f14852ff5d4e3f036fa"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a5f8262481efe7f14852ff5d4e3f036fa">sigma_py_init</a></td></tr>
<tr class="separator:a5f8262481efe7f14852ff5d4e3f036fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb25f45dcc1cdac0e470f66523303a4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#abcb25f45dcc1cdac0e470f66523303a4">sigma_yaw_init</a></td></tr>
<tr class="separator:abcb25f45dcc1cdac0e470f66523303a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41fef838c0b9a9e21fecfd7ef52d336e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a41fef838c0b9a9e21fecfd7ef52d336e">num_particles</a></td></tr>
<tr class="separator:a41fef838c0b9a9e21fecfd7ef52d336e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2cc6c3581660ce7ae7bef6c3acf4b59"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ab2cc6c3581660ce7ae7bef6c3acf4b59">p_alpha</a></td></tr>
<tr class="separator:ab2cc6c3581660ce7ae7bef6c3acf4b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e17119f4abe333c6dc13ae6f3ce79d0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a8e17119f4abe333c6dc13ae6f3ce79d0">w_min_max_thresh</a></td></tr>
<tr class="separator:a8e17119f4abe333c6dc13ae6f3ce79d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e988cf6ca144b6448cfa646b2afe52c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a7e988cf6ca144b6448cfa646b2afe52c">dec_rate</a></td></tr>
<tr class="separator:a7e988cf6ca144b6448cfa646b2afe52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00202577ce9daaeec59b8b1d9d5eb47c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a00202577ce9daaeec59b8b1d9d5eb47c">map_detections_only</a></td></tr>
<tr class="separator:a00202577ce9daaeec59b8b1d9d5eb47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3201bcbd5c6c8877f98d898fed7ecceb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a3201bcbd5c6c8877f98d898fed7ecceb">use_sensor_fov</a></td></tr>
<tr class="separator:a3201bcbd5c6c8877f98d898fed7ecceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9b934fdb00bdf8814c95d73bcfffe5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#ae9b934fdb00bdf8814c95d73bcfffe5c">pf_update_on</a></td></tr>
<tr class="separator:ae9b934fdb00bdf8814c95d73bcfffe5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83ee920fe03e9bc82eb87b0fd9c2c2dc"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCarPoseEstimator.html#a83ee920fe03e9bc82eb87b0fd9c2c2dc">radar_data_topics</a></td></tr>
<tr class="separator:a83ee920fe03e9bc82eb87b0fd9c2c2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for estimating the pose (for now, 2d position and yaw) of the autonomous driving testbed as well as a local Occupancy Grid Map (OGM) using a comibination of odometric and radar sensor data. This is achieved using a particle filter to weight hypothesis car poses based on the current occupancy map and measured radar targets. The estimated car pose and occupancy map are then published to ROS topics for visualization. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a1fb270d0d8eecc051bc1ca0e02bde595"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::angleConv </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts an angle to [-2*PI,2*PI].</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angle</td><td>The input angle to be converted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The output converted angle </dd></dl>

</div>
</div>
<a class="anchor" id="ab5b7344dd7b079631e8ddb92acf13ee3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::angleDiff </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Computes the difference between successive angles a and b.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>The first angle, in radians </td></tr>
    <tr><td class="paramname">b</td><td>The second angle, in radians </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The difference between angles, in radians </dd></dl>

</div>
</div>
<a class="anchor" id="a38ea434b924eeff6126724da1ab94e72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::computeSensorFOV </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Affine3d &amp;&#160;</td>
          <td class="paramname"><em>tf_sensor_to_world</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>start_ind_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>end_ind_i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>start_ind_j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>end_ind_j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Computes the grid map indices which bound the radar's field of view.</p>
<p>Computes the grid map indices which correspond to the "corners" of the radar's field of view, using some approximation to the conical FOV (here, a diamond shape).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tf_sensor_to_world</td><td>The pose of the radar sensor in the world frame. </td></tr>
    <tr><td class="paramname">start_ind_i</td><td>The start index for dimension "i" </td></tr>
    <tr><td class="paramname">end_ind_i</td><td>The end index for dimension "i" </td></tr>
    <tr><td class="paramname">start_ind_j</td><td>The start index for dimension "j" </td></tr>
    <tr><td class="paramname">end_ind_j</td><td>The end index for dimension "j" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7d8b873c81afa368cefce521c83431d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::constrainAngle </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Normalizes an angle to [-PI,PI).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>The input angle to be constrained to the range </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The output constrained angle </dd></dl>

</div>
</div>
<a class="anchor" id="a8c08e481bb545a1fe90a724b1b85ed30"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::grid_ind_to_world_pos </td>
          <td>(</td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Computes the world frame position of a grid map index.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>The input grid map index "i" </td></tr>
    <tr><td class="paramname">j</td><td>The input grid map index "j" </td></tr>
    <tr><td class="paramname">pos</td><td>The output world frame position of the input map indices. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af66e6b4641b3031dddb5900dcff742f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::inverseSensorModel </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; radar_ros_interface::RadarTarget &gt; &amp;&#160;</td>
          <td class="paramname"><em>targets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Eigen::Affine3d &amp;&#160;</td>
          <td class="paramname"><em>tf_sensor_to_world</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Computes the likelihood of grid map occupancy for each radar target.</p>
<p>Given an array of radar targets from a sensor with a given pose relative to the world frame, computes the likelihood of occupancy of grid map cells based on a so-called "inverse sensor
model" which is chosen/tuned to capture the uncertainty of detections by the sensor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targets</td><td>An array of RadarTarget objects originating from a sensor. </td></tr>
    <tr><td class="paramname">tf_sensor_to_world</td><td>The pose in world frame of the sensor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa15aae458a1b1a47ecb72527cf91f53e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CarPoseEstimator::log_odds_to_map_prob </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>log_odds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts from log-odds representation to map probability.</p>
<p>Converts a continuous log-odds value to a discrete "map probability" value in [0,100] with 100 corresponding to Prob = 1.0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_odds</td><td>Input log-odds representation value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output map probability in [0,100] </dd></dl>

</div>
</div>
<a class="anchor" id="a521284a9be9fc0fd6c39e77f6e31dadd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::log_odds_to_prob </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>log_odds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts from log-odds representation to probability.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">log_odds</td><td>Input log-odds representation value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output corresponding probability in [0.0, 1.0] </dd></dl>

</div>
</div>
<a class="anchor" id="ae1718fa4e7e37b6d2723e6797554c33c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::low_var_resamp </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; Eigen::Affine3d &gt; &amp;&#160;</td>
          <td class="paramname"><em>particles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Low-variance particle filtering resampling algorithm.</p>
<p>Resamples the particles of a particle filter according to the so-called "Low Variance" resampling algorithm, which is a simple but effective resampling strategy which helps avoid particle deficiency (ie all particles converging to one location over time).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">weights</td><td>Vector of particle weights, each in [0.0, 1.0] and summing to 1.0 </td></tr>
    <tr><td class="paramname">particles</td><td>Vector of particle pose hypotheses </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a30fc46d81f194ce048858d9dc94b0232"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::map_prob_to_log_odds </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts from map probability to log-odds representation.</p>
<p>Converts a discrete map probability in [0,100] to continuous log-odds representation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prob</td><td>Input probability in [0,100] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output log-odds representation value </dd></dl>

</div>
</div>
<a class="anchor" id="aef5d43a9b40b19a380e288938439df2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::normal_dist </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Evaluates the probability density function of a univariate normal distribution at a point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mu</td><td>Mean of the normal distribution </td></tr>
    <tr><td class="paramname">var</td><td>Variance of the normal distribution </td></tr>
    <tr><td class="paramname">x</td><td>Input (query) point value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output likelihood of the input point </dd></dl>

</div>
</div>
<a class="anchor" id="a9fa8588ebd7269f35f63415f84c265e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::normal_dist </td>
          <td>(</td>
          <td class="paramtype">Eigen::Vector2d&#160;</td>
          <td class="paramname"><em>mu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Matrix2d&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Vector2d&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Evaluates the probability density function of a bivariate normal distribution at a point.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mu</td><td>Mean of the normal distribution </td></tr>
    <tr><td class="paramname">var</td><td>Variance of the normal distribution </td></tr>
    <tr><td class="paramname">x</td><td>Input (query) point value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output likelihood of the input point </dd></dl>

</div>
</div>
<a class="anchor" id="a5e8505ff4d798050be9388bb0b69029b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::prob_detection </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>th_cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>th_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Computes probability of detection for a grid cell corresponding to a radar measurement.</p>
<p>Implements the detection portion of the inverse sensor model for the radar sensor, ie returns the probability of detection for a particular cell given a measured radar target at a given location (both in polar coordinates). This is assumed to be a Gaussian centered on the target having uncertainty according to the radar sensor's known resolution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r_cell</td><td>The range of the center of the cell, in meters </td></tr>
    <tr><td class="paramname">th_cell</td><td>The angle of the center of the cell, in radians </td></tr>
    <tr><td class="paramname">r_target</td><td>The range of the radar target, in meters </td></tr>
    <tr><td class="paramname">th_target</td><td>The angle of the center of the cell, in radians </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The output probability of detection for the cell in log-odds form </dd></dl>

</div>
</div>
<a class="anchor" id="a69d25574ccee5e33e3b7c5fce6839af9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::prob_no_detection </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>th_cell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>th_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Computes probability of no detection for a grid cell corresponding to a radar measurement.</p>
<p>Implements the no detection portion of the inverse sensor model for the radar sensor, ie returns the probability of not detecting an object in a particular cell given a measured radar target at a given location (both in polar coordinates). This is assumed to be a Gaussian centered on the radar sensor having uncertainty based on heuristics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r_cell</td><td>The range of the center of the cell, in meters </td></tr>
    <tr><td class="paramname">th_cell</td><td>The angle of the center of the cell, in radians </td></tr>
    <tr><td class="paramname">r_target</td><td>The range of the radar target, in meters </td></tr>
    <tr><td class="paramname">th_target</td><td>The angle of the center of the cell, in radians </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The output probability of detection for the cell in log-odds form </dd></dl>

</div>
</div>
<a class="anchor" id="a30f422b5afb364e053a3bc800ed93f2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::prob_to_log_odds </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>prob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Converts probability to log-odds representation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prob</td><td>Input probability in [0.0, 1.0] </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Output log-odds representation value </dd></dl>

</div>
</div>
<a class="anchor" id="ac98122d94daec15a02c51be36ae588d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::processModel </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>steer_angle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Affine3d &amp;&#160;</td>
          <td class="paramname"><em>pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Eigen::Matrix&lt; double, 6, 1 &gt; &amp;&#160;</td>
          <td class="paramname"><em>vel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>yaw_unwrpd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates a particle's state through the process model.</p>
<p>Update the pose/yaw and velocity of a particle using the simple kinematic car model and the car data read from the Panda dongle. Adds a prescribed amount of noise to the car data in order to maintain diversity in the particles, unless the base is being updated directly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">speed</td><td>Average wheel speed, as read by the Panda dongle </td></tr>
    <tr><td class="paramname">steer_angle</td><td>Steering wheel angle, as read by the Panda dongle </td></tr>
    <tr><td class="paramname">dt</td><td>Timestep (time between updates) for integration </td></tr>
    <tr><td class="paramname">pose</td><td>The 6d position + orientation of the particle </td></tr>
    <tr><td class="paramname">vel</td><td>6d velocity vector of the particle (linear and rotational velocity) </td></tr>
    <tr><td class="paramname">yaw_unwrpd</td><td>Particle yaw angle in radians, unwrapped to be continuous </td></tr>
    <tr><td class="paramname">is_base</td><td>Specifies whether a particle or the base is being updated </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9c6186f087c254f90915be63fac475de"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::unwrap </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>previousAngle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>newAngle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unwraps an angle using its previous and new values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">previousAngle</td><td>Previous unwrapped angle, in radians </td></tr>
    <tr><td class="paramname">newAngle</td><td>New wrapped angle, in radians </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new unwrapped angle, in radians </dd></dl>

</div>
</div>
<a class="anchor" id="ae329e591c83b7d58ebe318017f33b087"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::updateMap </td>
          <td>(</td>
          <td class="paramtype">const radar_ros_interface::RadarData &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback for updating the local grid map and estimated base pose of the car from radar data.</p>
<p>Called on receiving a RadarData message from a node in communication with the car radars. Uses the radar data to estimate the likelihood of each particle based on the current grid map, the particle pose and an inverse sensor model, combines all particles into an estimate of the current car pose, and updates the local grid map using the estimate and radar data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The RadarData message received from a node communcating to a radar sensor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9d969f5d6e6fbd5fabfe2768a959e85d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::updatePose </td>
          <td>(</td>
          <td class="paramtype">const radar_slam::CarData &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback for updating the pose of the car using odometric data.</p>
<p>Called on receiving a CarData message from a node in communication with the Panda dongle. Uses the car data to update the poses of all particles using the process model.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The CarData message received from the node communicating to the Panda. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6469faacebc57f95a9c41daa1dec5895"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CarPoseEstimator::world_pos_to_grid_ind </td>
          <td>(</td>
          <td class="paramtype">const Eigen::Vector3d &amp;&#160;</td>
          <td class="paramname"><em>pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>j</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Computes the nearest grid map indices to the given world frame position.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The input world frame position to be mapped to grid map indices. </td></tr>
    <tr><td class="paramname">i</td><td>The output grid map index "i" </td></tr>
    <tr><td class="paramname">j</td><td>The output grid map index "j" </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a7e988cf6ca144b6448cfa646b2afe52c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CarPoseEstimator::dec_rate</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decimation rate for updates using the radar targets.</p>
<p>This is set to use every ith sensor measurement array to save on computations. To be tuned. </p>

</div>
</div>
<a class="anchor" id="a00202577ce9daaeec59b8b1d9d5eb47c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CarPoseEstimator::map_detections_only</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets the occupancy mapping to use exactly integrated odometry and simply map radar targets.</p>
<p>Used mainly for debugging to remove the influence of the filtering. </p>

</div>
</div>
<a class="anchor" id="a9c29a0b73d4d9f30f0554ff496caa8b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::map_grid_res</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Resolution of a grid map cell, in meters </p>

</div>
</div>
<a class="anchor" id="a6f024f3baf29b595eb380eaaab1172e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CarPoseEstimator::map_grid_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of cells per dimension of the occupancy grid map </p>

</div>
</div>
<a class="anchor" id="a0eb1f7cdc300514be1c455741acca598"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::max_r</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum target range used for updates, in meters.</p>
<p>This can be set to the true maximum sensor range or, likely, to something smaller to filter out distance targets which add noise to the estimation. </p>

</div>
</div>
<a class="anchor" id="a5a2929e557a6c833c9b7aba180eba83a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::max_th</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum target azimuth (angle) used for updates, in radians.</p>
<p>This can be set to the true maximum sensor angle or something else to narrow the FOV. </p>

</div>
</div>
<a class="anchor" id="a25c6a62fa603a358e9ce7ec7213fe4aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::min_snr</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Minimum allowable Signal-to-Noise Ratio (SNR) for targets used in updates.</p>
<p>A SNR value of 15-20 is considered good, however it depends on the application. </p>

</div>
</div>
<a class="anchor" id="a41fef838c0b9a9e21fecfd7ef52d336e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CarPoseEstimator::num_particles</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of particles to be used in the particle filter.</p>
<p>This is a tuning parameter which should be set somewhere between 10 and 1000 depending on the application. The more particles used, the more computation time/power is required but the "better" the estimation quality (more hypotheses is a good thing). </p>

</div>
</div>
<a class="anchor" id="a22ec4de8912c39dd28479a146f695df1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CarPoseEstimator::num_update_cells</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of cells around the sensor in each direction to use in the map update</p>
<p>This is only used if <a class="el" href="classCarPoseEstimator.html#a3201bcbd5c6c8877f98d898fed7ecceb">use_sensor_fov</a> is set to false - then the entire area around the sensor is used for the update (rather than just those cells within the assumed sensor FOV). </p>

</div>
</div>
<a class="anchor" id="ab2cc6c3581660ce7ae7bef6c3acf4b59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::p_alpha</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Low pass filter gain for smoothing particle weight updates.</p>
<p>This is set to something like 0.7 to smooth out large weight changes and prevent the estimated pose from changing rapidly. </p>

</div>
</div>
<a class="anchor" id="ae9b934fdb00bdf8814c95d73bcfffe5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CarPoseEstimator::pf_update_on</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets whether or not to use the particle filter in updating the map. </p>

</div>
</div>
<a class="anchor" id="a303f33af92ee99db2f8b6174b89cae74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::prob_fa</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>False alarm (FA) probability, a quantity used internally in the sensor firmware.</p>
<p>The false alarm probability sets the level of acceptable false alarms (false positives). It is used in conjunction with the measured SNR to backcompute rough probability of detection. </p>

</div>
</div>
<a class="anchor" id="a83ee920fe03e9bc82eb87b0fd9c2c2dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; CarPoseEstimator::radar_data_topics</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Vector of strings of topics to which RadarData messages are published.</p>
<p>These are the ROS topics which will be subscribed to and used to set the <a class="el" href="classCarPoseEstimator.html#ae329e591c83b7d58ebe318017f33b087">updateMap</a> callback. </p>

</div>
</div>
<a class="anchor" id="a9d750d480867dab1573416f5787e46e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::rel_speed_thresh</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Threshold for relative speed of radar targets to be used.</p>
<p>The speed of each radar target is computed relative to the current estimated car speed and only those targets with a relative speed below the prescribed threshold (assumed static) are used in updates. </p>

</div>
</div>
<a class="anchor" id="ae6f15fec1dadf3c0b04a031b4f3246ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_no_r</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in NOT radar target range, in meters.</p>
<p>This controls the size of the Gaussian used to model the probability of NO detections between the radar sensor and the target. </p>

</div>
</div>
<a class="anchor" id="a8d08b65d718de338ceb592522c80caf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_no_th</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in NOT radar target azimuth (angle), in radians.</p>
<p>This controls the size of the Gaussian used to model the probability of NO detections between the radar sensor and the target. </p>

</div>
</div>
<a class="anchor" id="a0822d1b8de6ff15e0dda638e1e0f5ff1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_px_init</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial uncertainty in particle x-position, in meters. </p>

</div>
</div>
<a class="anchor" id="a5f8262481efe7f14852ff5d4e3f036fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_py_init</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial uncertainty in particle y-position, in meters. </p>

</div>
</div>
<a class="anchor" id="aea21826227bc01abd2d909e6d1042c48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_r</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in radar target range, in meters. </p>

</div>
</div>
<a class="anchor" id="ac563904aa1f14b97fc6308cbe2e01548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_speed</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in the measured car (wheel) speed, in meters/second </p>

</div>
</div>
<a class="anchor" id="a6c083f215cc0d3061b8875b29c6409fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_steer_angle</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in the measured car steering wheel angle, in degrees </p>

</div>
</div>
<a class="anchor" id="a1601ef1ed426682d396b6e4ca83d7c13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_th</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uncertainty in radar target azimuth (angle), in radians. </p>

</div>
</div>
<a class="anchor" id="abcb25f45dcc1cdac0e470f66523303a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::sigma_yaw_init</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initial uncertainty in particle yaw, in radians. </p>

</div>
</div>
<a class="anchor" id="aa89ebfabc0a3cf77c0bd680c2f55f6f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::steering_ratio</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Steering ratio of the testbed, dimensionless</p>
<p>This relates the steering angle to the wheel angle (effectively a steering sensitivity). </p>

</div>
</div>
<a class="anchor" id="a3201bcbd5c6c8877f98d898fed7ecceb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CarPoseEstimator::use_sensor_fov</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Determines whether to update the map/poses using only the computed sensor field of view</p>
<p>If this is set to true, the function <a class="el" href="classCarPoseEstimator.html#a38ea434b924eeff6126724da1ab94e72">computeSensorFOV</a> is used to compute the sensor's field of view in terms of grid map indices and only update cells which fall into the FOV range. </p>

</div>
</div>
<a class="anchor" id="a8e17119f4abe333c6dc13ae6f3ce79d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::w_min_max_thresh</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Ratio of smallest to largest particle weight, under which resampling is performed. </p>

</div>
</div>
<a class="anchor" id="a3f386aade8e93fbf119bc0b68c2f0b7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double CarPoseEstimator::wheelbase</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Wheelbase of the testbed, in meters</p>
<p>This was obtained for the Acura ILX 2016 from digging into the OpenPilot codebase. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/<a class="el" href="CarPoseEstimator_8h_source.html">CarPoseEstimator.h</a></li>
<li>src/CarPoseEstimator.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
